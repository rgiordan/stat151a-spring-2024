<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ryan Giordano">
<meta name="author" content="Dohyeong Ki">

<title>Syllabus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a>
  <ul>
  <li><a href="#course-goals" id="toc-course-goals" class="nav-link" data-scroll-target="#course-goals">Course goals</a></li>
  </ul></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#materials" id="toc-materials" class="nav-link" data-scroll-target="#materials">Materials</a>
  <ul>
  <li><a href="#textbook" id="toc-textbook" class="nav-link" data-scroll-target="#textbook">Textbook</a></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio">RStudio</a></li>
  <li><a href="#course-website" id="toc-course-website" class="nav-link" data-scroll-target="#course-website">Course website</a></li>
  </ul></li>
  <li><a href="#assignments-exams-and-grading" id="toc-assignments-exams-and-grading" class="nav-link" data-scroll-target="#assignments-exams-and-grading">Assignments, Exams, and Grading</a>
  <ul>
  <li><a href="#grading." id="toc-grading." class="nav-link" data-scroll-target="#grading.">Grading.</a></li>
  <li><a href="#final-exam." id="toc-final-exam." class="nav-link" data-scroll-target="#final-exam.">Final exam.</a></li>
  <li><a href="#quizzes." id="toc-quizzes." class="nav-link" data-scroll-target="#quizzes.">Quizzes.</a></li>
  <li><a href="#homework." id="toc-homework." class="nav-link" data-scroll-target="#homework.">Homework.</a></li>
  <li><a href="#final-project." id="toc-final-project." class="nav-link" data-scroll-target="#final-project.">Final project.</a></li>
  <li><a href="#turning-in-assignments" id="toc-turning-in-assignments" class="nav-link" data-scroll-target="#turning-in-assignments">Turning-in assignments</a></li>
  <li><a href="#late-work" id="toc-late-work" class="nav-link" data-scroll-target="#late-work">Late Work</a></li>
  </ul></li>
  <li><a href="#policies" id="toc-policies" class="nav-link" data-scroll-target="#policies">Policies</a>
  <ul>
  <li><a href="#course-culture" id="toc-course-culture" class="nav-link" data-scroll-target="#course-culture">Course Culture</a></li>
  <li><a href="#collaboration-policy" id="toc-collaboration-policy" class="nav-link" data-scroll-target="#collaboration-policy">Collaboration policy</a></li>
  <li><a href="#violations-of-the-collaboration-policy" id="toc-violations-of-the-collaboration-policy" class="nav-link" data-scroll-target="#violations-of-the-collaboration-policy">Violations of the collaboration policy</a></li>
  <li><a href="#laptop-policy" id="toc-laptop-policy" class="nav-link" data-scroll-target="#laptop-policy">Laptop policy</a></li>
  <li><a href="#covid-policy" id="toc-covid-policy" class="nav-link" data-scroll-target="#covid-policy">COVID policy</a></li>
  <li><a href="#accomodations-for-students-with-disabilities" id="toc-accomodations-for-students-with-disabilities" class="nav-link" data-scroll-target="#accomodations-for-students-with-disabilities">Accomodations for students with disabilities</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Syllabus</h1>
<p class="subtitle lead">Stat 151A: Linear Models</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Instructors</div>
    <div class="quarto-title-meta-contents">
             <p>Ryan Giordano </p>
             <p>Dohyeong Ki </p>
          </div>
  </div>
    
  
    
    <div>
    <div class="quarto-title-meta-heading">Term</div>
    <div class="quarto-title-meta-contents">
      <p class="doi">
        <a href="https://doi.org/Spring 2024">Spring 2024</a>
      </p>
    </div>
  </div>
  </div>
  

</header>

<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>These course policies are a work in progress and subject to change.</p>
</div>
</div>
<section id="objectives" class="level3">
<h3 class="anchored" data-anchor-id="objectives">Objectives</h3>
<p>Linear models strike a remarkable balance between simplicity and complexity: simple enough to permit detailed theoretical analysis, but complex enough to exhibit many of the strengths and weaknesses of statistics and machine learning more generally. In this course, we will explore classical and cutting-edge topics in statistics and machine learning through the lens of linear models. A strong emphasis will be placed on mathematical rigor, real-world decision-making, and the interplay between the two.</p>
<section id="course-goals" class="level4">
<h4 class="anchored" data-anchor-id="course-goals">Course goals</h4>
<p>By the end of the course, you should be able to</p>
<ul>
<li>Express standard regression analyses both mathematically and in R code</li>
<li>Critically relate the intended use of a regression analysis to its methods and assumptions</li>
<li>Identify common practical and conceptual pitfalls of regression analysis, and to improve the analysis when possible</li>
<li>Communicate the process and results of a regression analysis simply and clearly for a broad audience, using well-organized prose, reproducible code, and effective data visualizations.</li>
</ul>
</section>
</section>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisites</h3>
<p>This course will assume familiarity with the material in STAT 135 or STAT 102. STAT 135 implies other prerequisite courses (STAT 134 and its prerequisites). In particular, you must have had linear algebra, so you should be familiar with basic matrix operations, vector subspaces and projections, rank and invertibility of matrices, and quadratic forms.</p>
<p>This semester of Stat151A will include labs and projects in the R language. Proficiency with R at the level of the is a prerequisite. Students with a strong background in another programming language (e.g.&nbsp;Python) will be permitted to enroll with the understanding that they will learn R on their own prior to the start of the class.</p>
</section>
<section id="materials" class="level3">
<h3 class="anchored" data-anchor-id="materials">Materials</h3>
<section id="textbook" class="level4">
<h4 class="anchored" data-anchor-id="textbook">Textbook</h4>
<p>The primary materials for the course are the lecture notes, which will be posted to the course website in advance of class. The following textbooks are useful supplementary texts but there is no need to purchase them:</p>
<ul>
<li><a href="https://search.library.berkeley.edu/permalink/01UCS_BER/1thfj9n/alma991086117138306532">Applied Regression Analysis and Generalized Linear Models</a>, Fox</li>
<li><a href="https://wwnorton.com/books/9780393929720">Statistics</a>, Freedman, Pisani, and Purves</li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a>, Wickham and Grolemund (freely available online)</li>
</ul>
</section>
<section id="rstudio" class="level4">
<h4 class="anchored" data-anchor-id="rstudio">RStudio</h4>
<p>The software that we’ll be using for our data analysis is the free and open-source language called R that we’ll be interacting with via software called RStudio. As a Berkeley student, you have your own version of RStudio waiting you for at: <a href="http://stat20.datahub.berkeley.edu">http://stat20.datahub.berkeley.edu</a>. Most students taking Stat 20 have no experience programming; we’ll teach you everything you need to know!</p>
</section>
<section id="course-website" class="level4">
<h4 class="anchored" data-anchor-id="course-website">Course website</h4>
<p>All of the assignments will be posted to the course website at <a href="https://github.com/berkeley-stat151a/spring-2024">https://github.com/berkeley-stat151a/spring-2024</a>. This also holds the course notes, the syllabus, and links to Gradescope, Ed, and RStudio.</p>
</section>
</section>
<section id="assignments-exams-and-grading" class="level3">
<h3 class="anchored" data-anchor-id="assignments-exams-and-grading">Assignments, Exams, and Grading</h3>
<section id="grading." class="level4">
<h4 class="anchored" data-anchor-id="grading.">Grading.</h4>
<p>Grades will not be curved except where otherwise noted. Letter grades will be assigned according the weighted points earned. A score within [90-92%) will earn an A-, [92-98%) will earn an A, and [99-100%) will earn an A+. Scores in the 80’s will receive B’s, in the 70’s will receive C’s, with the same thresholds for plusses and minuses. Scores below 70% will be considered failing. Grades will be non-negotiable.</p>
<p>The weighting for the grades will be: - Homework completion (each weighted equally): 16% - Homework correctness (each weighted equally): 4% - Quizzes (each weighted equally): 20% - Final exam: 20% - Group project: 20% - Lab participation: 10%</p>
</section>
<section id="final-exam." class="level4">
<h4 class="anchored" data-anchor-id="final-exam.">Final exam.</h4>
<p>An in-person pencil-and-paper final exam will be scheduled during the usual final exam week.</p>
</section>
<section id="quizzes." class="level4">
<h4 class="anchored" data-anchor-id="quizzes.">Quizzes.</h4>
<p>Every two weeks we will have an in-class quiz. These quizzes will take the place of a sitdown midterm exam (i.e., there will be no midterm).</p>
</section>
<section id="homework." class="level4">
<h4 class="anchored" data-anchor-id="homework.">Homework.</h4>
<p>Homework assignments will be published on Fridays and due two weeks later. Homework will typically consist of a combination of mathematical problems and data analysis in R. All homework will be due as a pdf via Gradescope unless otherwise noted.</p>
<p>The purpose of homework is for students to attempt to work through problems on their own, both to advance their own understanding, and to allow the instructors to monitor student learning. Neither of these objectives are served if students are copying answers. For that reason, thoughtful and complete homework answers will receive nearly full credit (80% of the available homework points) even if incorrect. We strongly encourage students to submit their own best efforts, even if imperfect, rather than copy a correct answer.</p>
</section>
<section id="final-project." class="level4">
<h4 class="anchored" data-anchor-id="final-project.">Final project.</h4>
<p>Students will form groups of up to three people to submit a final project consisting of an analysis of a real dataset applying principles and techniques from the course.</p>
</section>
<section id="turning-in-assignments" class="level4">
<h4 class="anchored" data-anchor-id="turning-in-assignments">Turning-in assignments</h4>
<p>You will be turning in your assignments on a platform called <a href="https://www.gradescope.com/">Gradescope</a>. This is also the platform where your assignments will be graded, so you can return there to get feedback on your work. You are welcome to file a regrade request if you notice that we made an error in applying the rubric to your work, but be sure to do so <strong>within a week</strong> of the grades being posted. We will not accept regrade requests past that point.</p>
<p>In order to provide flexibility around emergencies that might arise for you throughout the semester (for example, missing a quiz due to COVID), we will apply for everyone:</p>
<ul>
<li>one emergency drop for quizzes<br>
</li>
<li>two emergency drops for homework</li>
</ul>
<p>This means that we will drop your lowest quiz score (which would be a 0 if you were absent) before computing your quiz average. For reading questions, we will drop your two lowest.</p>
</section>
<section id="late-work" class="level4">
<h4 class="anchored" data-anchor-id="late-work">Late Work</h4>
<p>Late work will not be accepted. If work is not submitted on time, it will receive a zero.<br>
It is entirely the students’ responsibility to turn work in on time.</p>
</section>
</section>
<section id="policies" class="level3">
<h3 class="anchored" data-anchor-id="policies">Policies</h3>
<section id="course-culture" class="level4">
<h4 class="anchored" data-anchor-id="course-culture">Course Culture</h4>
<p>Students taking STAT151A come from a wide range of backgrounds. We hope to foster an inclusive and supportive learning environment based on curiosity rather than competition. All members of the course community—the instructor, students, tutors, and readers—are expected to treat each other with courtesy and respect.</p>
<p>You will be interacting with course staff and fellow students in several different environments: in class, over the discussion forum, and in office hours. Some of these will be in person, some of them will be online, but the same expectations hold: be kind, be respectful, be professional.</p>
<p>If you are concerned about classroom environment issues created by other students or course staff, please come talk to the instructors about it.</p>
</section>
<section id="collaboration-policy" class="level4">
<h4 class="anchored" data-anchor-id="collaboration-policy">Collaboration policy</h4>
<p>You are encouraged to collaborate with your fellow students on problem sets and labs, but the work you turn in should reflect your own understanding and all of your collaborators must be cited. The individual component of quizzes, reading questions, and exams must reflect only your work.</p>
<p>Researchers don’t use one another’s research without permission; scholars and students always use proper citations in papers; professors may not circulate or publish student papers without the writer’s permission; and students may not circulate or post non-public materials (quizzes, exams, rubrics-any private class materials) from their class without the written permission of the instructor.</p>
<p>The general rule: you must not submit assignments that reflect the work of others unless they are a cited collaborator.</p>
<p>The following examples of collaboration <strong>are</strong> allowed and in fact encouraged!</p>
<ul>
<li>Discussing how to solve a problem with a classmate.</li>
<li>Showing your code to a classmate along with an error message or confusing output.</li>
<li>Posting snippets of your code to the discussion forum when seeking help.</li>
<li>Helping other students solve questions on the discussion with conceptual pointers or snippets of code that doesn’t whole hog give away the answer.</li>
<li>Googling the text of an error message.</li>
<li>Copying small snippets of code from answers on Stack Overflow.</li>
</ul>
<p>The following examples are <strong>not</strong> allowed:</p>
<ul>
<li>Leaving a representation of your assignment (the text, a screenshot) where students (current and future) can access it. Examples of this include websites like course hero, on a group text chain, over discord/slack, or in a file passed on to future students.</li>
<li>Accessing and submitting solutions to assignments from other students distributed as above. This includes copying written answers from other students and slightly modifying the language to differentiate it.</li>
<li>Searching or using generative AI to produce complete problem solutions.</li>
<li>Working on the final exam or individual quizzes in collaboration with other people or resources. These assignments must reflect individual work.</li>
<li>Submitting work on an exam that reflects consultation with outside resources or other people. Exams must reflect individual work.</li>
</ul>
<p>If you have questions about the boundaries of the policy, please ask. We’re always happy to clarify.</p>
</section>
<section id="violations-of-the-collaboration-policy" class="level4">
<h4 class="anchored" data-anchor-id="violations-of-the-collaboration-policy">Violations of the collaboration policy</h4>
<p>The integrity of our course depends on our ability to ensure that students do not violate the collaboration policy. We take this responsibility seriously and forward cases of academic misconduct to the Center for Student Conduct.</p>
<p>Students determined to have violated the academic misconduct policy by the Center for Student Conduct will receive a grade penalty in the course and a sanction from the university which is generally: (i) First violation: Non-Reportable Warning and educational intervention, (ii) Second violation: Suspension/Disciplinary Probation and educational interventions, (iii) Third violation: Dismissal.</p>
<p>And again, if you have questions about the boundaries of the collaboration policy, please ask!</p>
</section>
<section id="laptop-policy" class="level4">
<h4 class="anchored" data-anchor-id="laptop-policy">Laptop policy</h4>
<p>Laptops will not be permitted in lecture, but will be required for labs. If you do not have access to a laptop, you can borrow one from the University library. See the <a href="https://studenttech.berkeley.edu/hardware-lending">UC Berkeley hardware lending program</a> for more details. The Student Technology Equity Program is another good resource. Feel free to contact the instructor if you have concerns about your access to needed technology.</p>
</section>
<section id="covid-policy" class="level4">
<h4 class="anchored" data-anchor-id="covid-policy">COVID policy</h4>
<p>Maintaining your health and that of the Berkeley community is of primary importance to course staff, so if you are feeling ill or have been exposed to illness, please do not come to class. All of the materials used in class will be posted to the course website. You’re encouraged to reach out to fellow students to discuss the class materials or stop by group tutoring or office hours to chat with a tutor or the instructor.</p>
</section>
<section id="accomodations-for-students-with-disabilities" class="level4">
<h4 class="anchored" data-anchor-id="accomodations-for-students-with-disabilities">Accomodations for students with disabilities</h4>
<p>Stat 20 is a course that is designed to allow all students to succeed. If you have letters of accommodations from the Disabled Students’ Program, please share them with your instructor as soon as possible, and we will work out the necessary arrangements.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>These course polices are based on a template and text generously shared by Andrew Bray. Thanks, Andrew!</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>